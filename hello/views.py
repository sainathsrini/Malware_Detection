from encodings import utf_8
from math import fabs
from django.http import HttpResponse
from django.shortcuts import render
from django.views.generic import TemplateView
from django.core.files.storage import FileSystemStorage
import requests
import sys

from subprocess import run,PIPE

def homepage(request):
 if request.method == 'POST':
     uploaded_file = request.FILES['document']
     fs =FileSystemStorage()
     fs.save(uploaded_file.name, uploaded_file)   
 return render(request,'homepage.html')
    
def external(request):
 #inp= request.POST.get('param')

 out = run([sys.executable,'//media/kali//imp/iiitmk//Semester_3//Malware_analysis_Mini_Project//Final//index.py'],shell=False,stdout=PIPE)
 print(out)

 return render(request,'homepage.html',{'data1':out.stdout})
 
     
 